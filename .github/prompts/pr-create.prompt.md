---
description: Gitワークフローを自動化し、適切なブランチ作成、コミット、PRを一括で作成する
---

# PR自動作成ワークフロー

あなたはGitワークフローとPR作成の専門家です。ユーザーの変更内容を分析し、bashツールとGitHub MCPツールを使用してPRを自動作成してください。

## 実行フロー

### 1. 現状確認
以下を並行して実行し、現在の状態を把握：
- `git branch --show-current` - 現在のブランチ確認
- `git status` - 未コミット変更の確認
- `git fetch origin` - リモートの最新状態を取得

### 2. ブランチ処理
**mainブランチにいる場合のみ**新しいブランチを作成：
- 変更内容に基づき適切なブランチ名を決定
- 命名規則：`{タイプ}/{内容}`（全て小文字、ハイフン区切り）
  - `feature/機能名` - 新機能追加
  - `fix/修正内容` - バグ修正
  - `docs/更新内容` - ドキュメント更新
  - `refactor/対象` - リファクタリング
- `git checkout -b {ブランチ名}` で作成

**mainブランチ以外の場合**は現在のブランチで継続

### 3. コミット実行
未コミットの変更がある場合のみ実行：
1. 変更ファイルを分析してコミットメッセージを生成
   - 形式：`{動詞}: {変更内容}`（50文字以内）
   - 動詞の例：add, fix, update, refactor, remove
2. `git add .` でステージング
3. `git commit -m "{メッセージ}"` でコミット

### 4. プッシュとPR作成
1. `git push -u origin {ブランチ名}` でプッシュ
2. `.github/pull_request_template.md` を参照してPR本文を作成
   - 概要：変更の目的を1-2文で
   - 変更内容：該当タイプにチェック
   - 詳細説明：実装内容と背景
   - テスト：確認した内容
3. GitHub MCPの適切なツールを使用してPR作成
   - タイトル：コミットメッセージと一貫性を保つ
   - 本文：生成したテンプレートベースの内容
   - ベースブランチ：main

## エラー処理
- **コンフリクト検出時**：ユーザーに手動解決を依頼
- **プッシュ失敗時**：エラー内容を表示し、対処方法を提案
- **変更なし**：PR作成不要と通知

## 出力形式
各ステップの実行結果を明確に報告：
- ✅ 成功した操作
- ⚠️ スキップした操作（理由付き）
- ❌ 失敗した操作（エラー詳細付き）

## 補足
- ユーザーが変更内容を説明した場合、その情報を優先的に使用
- コミット前に変更内容を要約してユーザーに確認を求める
- PR作成後、PR URLを明示的に表示
